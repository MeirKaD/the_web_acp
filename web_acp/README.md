# The Web Agent - Advanced Web Research Assistant

This repository contains **The Web Agent**, a powerful LangGraph-powered research assistant that provides comprehensive web search, data extraction, and structured information retrieval capabilities through the BeeAI Platform.

## Overview

The Web Agent is an advanced AI research assistant that combines Google Gemini's language capabilities with Bright Data's extensive web scraping and data extraction tools. It provides intelligent, multi-faceted research with memory persistence and real-time web access.

### Key Features

- **Advanced Web Search**: Search across Google, Bing, and Yandex with intelligent result analysis
- **Structured Data Extraction**: Direct access to 40+ data feeds including Amazon, LinkedIn, YouTube, Reddit, and more
- **Smart Web Scraping**: Extract content from any website without getting blocked
- **Conversation Memory**: Persistent conversation history across sessions
- **Multi-Source Research**: Intelligently combines multiple sources for comprehensive answers
- **Real-time Tool Execution**: Live web searches and data extraction during conversations

## Project Structure

```sh
â”œâ”€â”€ src/                                    # Source code directory
â”‚   â””â”€â”€ beeai_agents/                       # Python package directory
â”‚       â”œâ”€â”€ __init__.py                     # Package initialization (empty)
â”‚       â””â”€â”€ agent.py                        # Agent implementations (main file you'll modify)
â”œâ”€â”€ Dockerfile                              # Container configuration to build the agent
â”œâ”€â”€ pyproject.toml                          # Package metadata and dependencies
â”œâ”€â”€ uv.lock                                 # Dependency lock file (generated by UV)
â””â”€â”€ README.md                               # Project documentation
```

**Key files to focus on:**

- `agent.py`: This is where you'll implement your agent logic
- `pyproject.toml`: Update this if you need to add dependencies
- `Dockerfile`: Modify if you need special build configuration

## Requirements

- [BeeAI Platform](https://docs.beeai.dev/introduction/quickstart) installed
- Python 3.11 or higher
- [UV package manager](https://docs.astral.sh/uv/) for dependency management
- **Bright Data API Token** - Required for web scraping and data extraction capabilities
- **Google API Key** - Required for Gemini 2.0 Flash model access

## Getting Started

### 1. Environment Setup

**Configure your API keys** using the provided `.env.example` file:

```bash
# Copy the example environment file
cp .env.example .env

# Edit the .env file with your API keys
nano .env
```

**Required Environment Variables:**

```env
# Bright Data API Token - Get yours at https://brightdata.com
BRIGHT_DATA_API_TOKEN=your_bright_data_token_here

# Google API Key - Get yours at https://aistudio.google.com/apikey  
GOOGLE_API_KEY=your_google_api_key_here
```

> **Important**: The agent requires both API keys to function properly. Without them, you won't have access to web search capabilities or the LLM model.

### 2. Installation

**Install dependencies** using `uv sync`:

```bash
uv sync
```

### 3. The Web Agent Implementation

This agent is already fully implemented and ready to use! The main logic is in [src/beeai_agents/agent.py](src/beeai_agents/agent.py) and includes:

**Core Agent Features:**

- **LangGraph Integration**: Uses LangGraph's `create_react_agent` for intelligent tool orchestration
- **Bright Data MCP**: Connects to Bright Data's web scraping tools via Model Context Protocol
- **Google Gemini**: Powered by Gemini 2.0 Flash for advanced reasoning
- **Memory Persistence**: Conversation history maintained across sessions
- **Streaming Responses**: Real-time tool execution and thinking process visibility

**Agent Capabilities:**

```py
@server.agent(
    name="the_web_agent",
    description="Conversational agent with memory, supporting real-time search",
    metadata=Metadata(
        annotations=Annotations(
            beeai_ui=PlatformUIAnnotation(
                ui_type=PlatformUIType.CHAT,
                display_name="The Web Agent",
                user_greeting="Hello! I'm your Web Search assistant. What would you like to browse today?",
                tools=[
                    AgentToolInfo(name="search_engine", description=""),
                    AgentToolInfo(name="scrape_as_markdown", description=""),
                ]
            )
        ),
        capabilities=[
            {"name": "Web Search", "description": "search using Google, Bing or Yandex"},
            {"name": "Structured Data extraction", "description": "extract structured data from 40+ Data feeds"},
            {"name": "Web Data Extraction", "description": "Extract Data from web pages at scale without getting blocked"}
        ],
        recommended_models=["gemini-2.0-flash"]
    )
)
```

### ðŸ–¥ï¸ Enhancing the User Experience with `PlatformUIAnnotation`

To create the most engaging and helpful interface for your users, define the following metadata in your agent decorator. This information shapes how your agent is presented in the GUI.

```py
@server.agent(
    name="chat",
    description=(
        "Conversational agent with memory, supporting real-time search, "
        "Wikipedia lookups, and weather updates through integrated tools"
    ),
    metadata=Metadata(
        annotations=Annotations(
            beeai_ui=PlatformUIAnnotation(
                ui_type=PlatformUIType.CHAT,
                display_name="Chat Agent",
                user_greeting="Hello! I'm your AI assistant. How can I help you today?",
                tools=[
                    AgentToolInfo(name="Weather", description=""),
                    AgentToolInfo(name="Wikipedia", description=""),
                    AgentToolInfo(
                        name="Google Search", description=""
                    ),
                ]
            )
        ),
        framework="BeeAI",
        recommended_models=["llama3.3:70b-instruct-fp16"],
        author={
            "name": "John Smith",
            "email": "jsmith@example.com",
            "url": "https://example.com"
        }
    )
)
```

>[!Note]
>The example above highlights the components that directly impact the **GUI experience**. For the complete metadata specification, see the [ACP Agent Detail](https://agentcommunicationprotocol.dev/core-concepts/agent-detail) documentation.

4. **Update project metadata and dependencies** in the `pyproject.toml` file. After updating, synchronize with `uv sync`.

## Running The Web Agent

### Start the Agent Server

```bash
# Start the agent server
uv run server
```

This will start a local HTTP server on http://127.0.0.1:8000 by default. You'll get an output similar to:

```
INFO:     Started server process [86448]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

### Test the Agent

Your agent should now be started on http://localhost:8000. You can verify it's running with the BeeAI CLI:

```bash
# List available agents
beeai list

# Run the web search agent
beeai run the_web_agent "What are the latest developments in AI?"
```

### Example Usage

**Question**: "Compare the iPhone 15 Pro vs Samsung Galaxy S24 Ultra"

**The Web Agent will:**
1. Search for comparison reviews across multiple sources
2. Extract structured data from tech websites
3. Scrape detailed specifications from manufacturer sites
4. Compile user reviews from Reddit and forums
5. Provide a comprehensive comparison with citations

**Response includes:**
- Detailed feature comparisons
- Price analysis from multiple retailers
- Professional review summaries
- User sentiment analysis
- Final recommendations based on use cases

## Adding Agents to BeeAI Platform

There are two ways to add your agent to the BeeAI Platform:

### Local Development Mode

When running agents locally with `uv run server`, they are automatically registered with the BeeAI Platform. In this mode:
- The BeeAI Platform will communicate with your local server
- You manage the agent's lifecycle (starting/stopping)
- Changes are immediately available without redeployment

### Deployment from GitHub

To share your agent with others or deploy it to the BeeAI Platform:

- Push your agent code to a GitHub repository
- Add the agent to BeeAI using: `beeai add https://github.com/your-username/your-repo-name`

The BeeAI Platform will automatically:
- Clone your repository
- Build a Docker image
- Start the agent container
- Extract agent configuration directly from the `/agents` endpoint
- Register the agent in the platform

#### Version Management

- For stable versions, use Git tags (e.g., `agents-v0.0.1`)
- When adding a tagged version: `beeai add https://github.com/your-username/your-repo-name@agents-v0.0.1`
- To update: remove the old version (`beeai remove <agent-name>`) and add the new one

## Troubleshooting

### Agent Status

To check the status of your agents:

```sh
# List all agents and their status
beeai list
```

### Logs

- **Local agents:** View logs directly in the terminal where you ran `uv run server`
- **Managed agents:** Use `beeai logs <agent-id>` to view logs
- **BeeAI server logs:** Check `/opt/homebrew/var/log/beeai-server.log` (default location)
